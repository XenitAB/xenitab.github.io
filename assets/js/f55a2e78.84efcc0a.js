"use strict";(globalThis.webpackChunkhome=globalThis.webpackChunkhome||[]).push([[3708],{6173(e,s,n){n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"xks/operator-guide/aws-azdo","title":"AWS azure-devops","description":"In this scenario, the customer is using Azure DevOps for source control and continuous delivery and use EKS to deliver services.","source":"@site/docs/xks/operator-guide/aws-azdo.md","sourceDirName":"xks/operator-guide","slug":"/xks/operator-guide/aws-azdo","permalink":"/docs/xks/operator-guide/aws-azdo","draft":false,"unlisted":false,"editUrl":"https://github.com/xenitab/xenitab.github.io/edit/main/docs/xks/operator-guide/aws-azdo.md","tags":[],"version":"current","frontMatter":{"id":"aws-azdo","title":"AWS azure-devops"},"sidebar":"docs","previous":{"title":"Blue Green Clusters","permalink":"/docs/xks/operator-guide/blue-green"},"next":{"title":"XKF on Github","permalink":"/docs/xks/operator-guide/github"}}');var t=n(4848),i=n(8453);const o={id:"aws-azdo",title:"AWS azure-devops"},a=void 0,l={},u=[{value:"Terraform",id:"terraform",level:2},{value:"GitOps user",id:"gitops-user",level:2}];function c(e){const s={a:"a",h2:"h2",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"In this scenario, the customer is using Azure DevOps for source control and continuous delivery and use EKS to deliver services.\nWe also have support for GitHub."}),"\n",(0,t.jsxs)(s.p,{children:["The main difference from an Azure DevOps point of view is that we use the AWS service connection.\nFirst you need to install the addon to Azure DevOps using the Azure marketplace,\nyou can find more information in the ",(0,t.jsx)(s.a,{href:"https://docs.aws.amazon.com/vsts/latest/userguide/getting-started.html",children:"AWS Toolkit for Azure DevOps getting started guide"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"We will use two users when talking to AWS, one for our Terraform pipelines and one for\nour GitOps flow where we use Elastic Container Registry (ECR) to store the container images."}),"\n",(0,t.jsx)(s.h2,{id:"terraform",children:"Terraform"}),"\n",(0,t.jsx)(s.p,{children:"All this is possible to solve using Terraform but we currently do not have any terraform module to handle it so for now you can read about the manual steps."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Create an IAM user","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Tip: put both these users under a specific path, for example CI"}),"\n",(0,t.jsx)(s.li,{children:"Save the access key in a safe place"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Attach IAM policy","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"AmazonEKSClusterPolicy"}),"\n",(0,t.jsx)(s.li,{children:"AdministratorAccess"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"gitops-user",children:"GitOps user"}),"\n",(0,t.jsx)(s.p,{children:"In our GitOps pipelines using Flux we need to be able to push and delete images in ECR.\nSo very similar to how we created the Terraform user:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Create an IAM user","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Tip: put both these users under a specific path, for example CI"}),"\n",(0,t.jsx)(s.li,{children:"Save the credentials in a safe place"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Attach IAM policy","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"AmazonEC2ContainerRegistryFullAccess"}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,s,n){n.d(s,{R:()=>o,x:()=>a});var r=n(6540);const t={},i=r.createContext(t);function o(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);