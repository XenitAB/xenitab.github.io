"use strict";(globalThis.webpackChunkhome=globalThis.webpackChunkhome||[]).push([[2547],{6267(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"xks/developer-guide/ci-cd/ci","title":"Continuous Integration","description":"XKF provides a number of base templates for CI and CD, in this part we will walk you through the CI pipeline.","source":"@site/docs/xks/developer-guide/ci-cd/ci.md","sourceDirName":"xks/developer-guide/ci-cd","slug":"/xks/developer-guide/ci-cd/ci","permalink":"/docs/xks/developer-guide/ci-cd/ci","draft":false,"unlisted":false,"editUrl":"https://github.com/xenitab/xenitab.github.io/edit/main/docs/xks/developer-guide/ci-cd/ci.md","tags":[],"version":"current","frontMatter":{"id":"ci","title":"Continuous Integration"},"sidebar":"docs","previous":{"title":"Container Security","permalink":"/docs/xks/developer-guide/container-security"},"next":{"title":"Continuous Delivery","permalink":"/docs/xks/developer-guide/ci-cd/cd"}}');var r=i(4848),s=i(8453);i(8180);const t={id:"ci",title:"Continuous Integration"},a=void 0,l={},c=[{value:"Hadolint",id:"hadolint",level:2},{value:"Trivy",id:"trivy",level:2},{value:"Horusec",id:"horusec",level:2},{value:"To enable Horusec in your CI pipeline",id:"to-enable-horusec-in-your-ci-pipeline",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["XKF provides a number of base ",(0,r.jsx)(n.a,{href:"https://github.com/XenitAB/azure-devops-templates/blob/main/gitops-v2/",children:"templates"})," for CI and CD, in this part we will walk you through the CI pipeline.\nThe core feature of the CI pipeline is that it generates a artifactory containing the application container."]}),"\n",(0,r.jsx)(n.p,{children:"The CI triggers the CD that will grab the container artifact and push it to a central container registry, Azure uses ACR and AWS uses ECR."}),"\n",(0,r.jsxs)(n.p,{children:["When following these docs we assume that you already have imported the ",(0,r.jsx)(n.a,{href:"https://github.com/XenitAB/azure-devops-templates#usage",children:"azure-devops-templates"})," to your project."]}),"\n",(0,r.jsx)(n.p,{children:"There are a number of extra addons that you can enable on your build stage that we will cover below."}),"\n",(0,r.jsx)(n.h2,{id:"hadolint",children:"Hadolint"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/hadolint/hadolint",children:"Hadolint"})," is a linter for container files and gives you suggestions on how to follow best practices."]}),"\n",(0,r.jsx)(n.p,{children:"This check is enabled by default and you can disable it by adding:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-.yaml",children:"dockerLint:\n    enabled: false\n    ignoreRuleViolations: false\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can add a config file for hadolint where you can\n",(0,r.jsx)(n.a,{href:"https://github.com/hadolint/hadolint#configure",children:"ignore"})," specific errors."]}),"\n",(0,r.jsx)(n.h2,{id:"trivy",children:"Trivy"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/aquasecurity/trivy",children:"Trivy"})," is a container image scanner\nin a cli tool used to scan for CVE",":s"," in both your code and base image."]}),"\n",(0,r.jsx)(n.p,{children:"To scan the image:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"trivy <image-name>\n"})}),"\n",(0,r.jsx)(n.p,{children:"After we have built the image we scan it and send you a report."}),"\n",(0,r.jsx)(n.p,{children:"If you want to ignore specific Trivy errors you can create a .trivyignore file.\nFor example it can look like this:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-.trivyignore",children:"CVE-2020-29652\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you want to disable Trivy you can do so by appending the following to your CI file."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-.yaml",children:"imageScan\n    enable: true\n    ignoreRuleViolations: true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"horusec",children:"Horusec"}),"\n",(0,r.jsx)(n.p,{children:"A CLI tool to scan your application code for security issues that is disabled by default."}),"\n",(0,r.jsx)(n.h3,{id:"to-enable-horusec-in-your-ci-pipeline",children:"To enable Horusec in your CI pipeline"}),"\n",(0,r.jsx)(n.p,{children:"Before enabling Horusec in your CI pipeline you should configure what issues your CI pipeline should catch:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"horusec generate\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This will generate a file called ",(0,r.jsx)(n.code,{children:"horusec-config.json"}),", in this file you can configure everything Horusec should scan and report."]}),"\n",(0,r.jsxs)(n.p,{children:["You can find more ",(0,r.jsx)(n.a,{href:"https://horusec.io/docs/cli/resources/#global-flags",children:"Horusec config flags here"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key config values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"horusecCliSeveritiesToIgnore: What severities do you want to show?"}),"\n",(0,r.jsx)(n.li,{children:"horusecCliFilesOrPathsToIgnore: What paths do you want to ignore?"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"To save time it is easy to run Horusec locally:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"horusec start -p .\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var o=i(6540);const r={},s=o.createContext(r);function t(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);